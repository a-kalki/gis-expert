# Проект "IT Course Landing"

Проект для создания и ведения лендинг-страниц, нацеленных на привлечение клиентов на курсы по программированию.

## Ключевые компоненты

### 1. Веб-страницы

*   `index.html`: Основной многостраничный сайт с подробной информацией о курсах и программе.
*   `landing.html`: Современная одностраничная лендинг-страница для быстрых рекламных кампаний.
*   `*.md`: Исходные файлы с контентом, который используется для наполнения HTML-страниц.

### 2. Система аналитики поведения пользователей

Для понимания эффективности страниц и поведения пользователей в проект встроена система сбора аналитики.

*   **Клиентский трекер (`src/ui/tracker.ts`):** Легковесный JavaScript/TypeScript-модуль, который встраивается в страницы и отслеживает ключевые метрики:
    *   Время нахождения на странице.
    *   Глубина прокрутки.
    *   Ключевые действия (клики по кнопкам, переходы).
    *   Время просмотра отдельных секций страницы.
*   **Форма обратной связи (`src/ui/form.html`):** Отдельная HTML-форма для сбора заявок с расширенной валидацией.
*   **Бэкенд (`src/api/server.ts`):** Кастомный сервер на `Bun.serve`, который принимает данные от трекера и формы, обрабатывает их и сохраняет напрямую в базу данных.
*   **Хранилище данных (SQLite):** Все собранные метрики и данные форм сохраняются в локальную базу данных SQLite (`course.sqlite`).

## Технологический стек

*   **Frontend:** HTML5, CSS3, TypeScript (сборка через Bun)
*   **Backend:** Bun.serve, TypeScript
*   **База данных:** SQLite (через `bun:sqlite`)
*   **Система миграций:** Для управления схемой базы данных используются скрипты миграций, расположенные в директории `migrations/`. Правила и соглашения по работе с БД описаны в `migrations/db_rules.md`.
*   **Среда выполнения и пакетный менеджер:** Bun
*   **n8n:** для работы ИИ-агента, но выбор сделан в рекламных целях. Обещание что они могут делать такие же фичи без программирования.

## Стратегия тестирования

Для обеспечения стабильности и качества проекта используется многоуровневая стратегия тестирования:

*   **Юнит-тесты:** Проверяют мельчайшие, изолированные части кода (функции, методы классов). Фокус на критически важных функциях (например, валидация телефонных номеров, методы репозиториев).
*   **Интеграционные тесты:** Проверяют взаимодействие между несколькими модулями или слоями (например, API-эндпоинт -> сервис -> репозиторий -> БД).
*   **Сквозные (E2E) тесты:** Имитируют полный пользовательский путь в браузере.

**Баланс тестирования:** Мы стремимся к тому, чтобы тесты обеспечивали работоспособность важнейших узлов и частей проекта, не пытаясь покрыть каждую строку кода. Основное внимание уделяется критическим функциям и потенциальным точкам отказа.

## Быстрый старт

1.  **Установка зависимостей:**
    ```bash
    bun install
    ```

2.  **Запуск сервера и сборка фронтенда (режим разработки):**
    ```bash
    bun run start:dev
    ```
    *   Эта команда соберет фронтенд-файлы в `dist/dev` и запустит бэкенд-сервер на порту 3000.

3.  **Просмотр страниц:**
    *   Откройте `dist/dev/index.html` в вашем браузере.
    *   Страница анкеты доступна по `dist/dev/form.html?userId=<ваш_id>`.

4.  **Запуск тестов:**
    *   **Юнит-тесты:**
        ```bash
        bun test src/domain/phone.test.ts # Пример запуска конкретного теста
        bun test # Запустить все тесты
        ```
    *   *(Интеграционные и E2E тесты будут добавлены позже)*
