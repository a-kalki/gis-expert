# План реализации: Отдельная HTML-форма для анкеты

**Задача:** Создать отдельную HTML-форму для анкеты, передавать в нее `userId` через параметры URL и сохранять данные формы в базу данных через `bun.serve`. Реализовать мультивыбор и стилизацию.

**Статусы:**
*   `[ ]` - Не начато
*   `[~]` - В процессе
*   `[x]` - Выполнено

---

### **Этап 1: Создание HTML-формы (`form.html`)**

*   `[x]` **1.1. Создать новый файл `src/ui/form.html`.**
*   `[x]` **1.2. Реализовать логику получения `userId` из URL.**
*   `[x]` **1.3. Реализовать отправку данных формы на webhook.**

---

### **Этап 2: Модификация Frontend (`src/ui/form.html` и `src/ui/form-logic.js`)**

*   `[x]` **2.1. Перенести JS-логику формы в отдельный файл (`src/ui/form-logic.js`).**
    *   **Действие:** Создать `src/ui/form-logic.js` и переместить туда весь JavaScript из `form.html`.
    *   **Действие:** Обновить `form.html` для подключения `form-logic.js`.
*   `[x]` **2.2. Обновить `package.json` для сборки `form-logic.js`.**
    *   **Действие:** Добавить `src/ui/form-logic.js` в список входных файлов для `bun build` в скриптах `build:dev` и `build:prod`.
*   `[ ]` **2.3. Реализовать мультивыбор для вопросов формы.**
    *   **Действие:** Изменить тип полей в `src/ui/form.html` на `checkbox` или `select multiple` для указанных вопросов.
    *   **Действие:** Обновить логику сбора данных формы в `src/ui/form-logic.js` для корректной обработки множественных значений.
*   `[x]` **2.4. Обновить стилистику формы.**
    *   **Действие:** Применить W3.CSS классы и кастомные стили для создания "карточек" вопросов и общего минималистичного дизайна.

---

### **Этап 3: Модификация Backend (База данных и `src/api/services/formSubmission.ts`)**

*   `[x]` **3.1. Создать новую таблицу для данных анкеты.**
*   `[x]` **3.2. Обновить схему таблицы `form_submissions` для мультивыбора.**
    *   **Действие:** Изменить тип колонок для вопросов с мультивыбором на `TEXT` (для хранения JSON-строк).
*   `[x]` **3.3. Обновить логику сохранения формы в `src/api/services/formSubmission.ts`.**
    *   **Действие:** Модифицировать `saveFormData` для корректной обработки и сохранения данных мультивыбора (как JSON-строк).

---

### **Этап 4: Тестирование**

*   `[ ]` **4.1. Проверить сквозной процесс.**
    *   **Действие:** Заполнить форму, убедиться, что данные корректно сохраняются в новой таблице в базе данных, включая множественные выборы и стилистику.